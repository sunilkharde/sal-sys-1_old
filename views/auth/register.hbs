<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-6 border p-4">
            <h2 class="mb-4">User Registration</h2>
            <!--
            {{#if alert}}
            <div class="alert alert-success alert-dismissible fade show" role="alert">
                {{alert}}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            {{/if}}
            -->
            <form action="/auth/register" method="post">
                <div class="mb-3">
                    <label for="name" class="form-label">Username</label>
                    <input type="text" class="form-control" id="username" name="username" value="{{data.username}}"
                        required placeholder="Enter your username" pattern="[A-Za-z0-9._]{1,20}" maxlength="20"
                        aria-describedby="usernameHelp">
                    <div id="usernameHelp" class="form-text">Username can only contain alphabets, numbers, underscore
                        (_) and dot (.) and cannot exceed 20 characters.</div>
                </div>
                <div class="mb-3">
                    <label for="email" class="form-label">Email</label>
                    <input type="email" class="form-control" id="email_id" name="email_id" value="{{data.email_id}}"
                        required placeholder="Enter your email">
                </div>
                <div class="mb-3">
                    <label for="phone" class="form-label">Mobile</label>
                    <input type="tel" class="form-control" id="mobile_no" name="mobile_no" inputmode="numeric"
                        pattern="[0-9]{10}" maxlength="10" value="{{data.mobile_no}}" placeholder="Enter your last name"
                        required aria-describedby="mobileHelp">
                    <div id="mobileHelp" class="form-text">Mobile No can only contain numbers and cannot exceed 10
                        characters.</div>
                </div>
                <div class="mb-3">
                    <label for="password" class="form-label">Password</label>
                    <div class="input-group">
                        <input type="password" class="form-control" name="password" id="password"
                            value="{{data.password}}" required placeholder="Enter your password"
                            aria-describedby="passwordHelp"
                            pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).{6,20}$">
                        <button class="btn btn-outline-secondary" type="button" id="password-toggle">
                            <i class="bi bi-eye"></i></button>
                    </div>
                    <div id="passwordeHelp" class="form-text">Password between 6 to 20 characters which contain numbers,
                        uppercase/lowercase letters and at least one special character.</div>
                </div>
                <div class="mb-3">
                    <label for="confirm-password" class="form-label">Confirm Password</label>
                    <input type="password" class="form-control" id="confPassword" name="confPassword"
                        value="{{data.confPassword}}" placeholder="Confirm your password">
                </div>
                </b>

                {{#isEqual user.user_role "Admin"}}
                <div class="mb-3">
                    <button class="btn btn-info" type="button" data-bs-toggle="collapse"
                        data-bs-target="#additionalInfo" aria-expanded="false" aria-controls="additionalInfo">
                        User Additional Information
                    </button>
                    <div class="collapse" id="additionalInfo">
                        <!-- <div class="card card-body"> -->
                        <div class="mb-3"></div>
                        <div class="mb-3">
                            <label for="first-name" class="form-label">First Name</label>
                            <input type="text" class="form-control" id="first_name" name="first_name"
                                value="{{data.first_name}}" placeholder="Enter your first name">
                        </div>
                        <div class="mb-3">
                            <label for="middle-name" class="form-label">Middle Name</label>
                            <input type="text" class="form-control" id="middle_name" name="middle_name"
                                value="{{data.middle_name}}" placeholder="Enter your middle name">
                        </div>
                        <div class="mb-3">
                            <label for="last-name" class="form-label">Last Name</label>
                            <input type="text" class="form-control" id="last_name" name="last_name"
                                value="{{data.last_name}}" placeholder="Enter your last name">
                        </div>

                        <div class="mb-3">
                            <label for="user-role" class="form-label">User Role</label>
                            <select class="form-select" id="user_role" name="user_role"
                                aria-label=".form-select-sm example">
                                {{#each role_list}}
                                <option value="{{role_id}}" {{#isEqual ../data.role_id
                                    category_id}}selected{{/isEqual}}>
                                    {{role_name}}</option>
                                {{/each}}
                            </select>
                        </div>

                        <!-- <div class="mb-3">
                            <label for="user-role" class="form-label">User Role</label>
                            <select class="form-select" id="user_role" name="user_role"
                                aria-label=".form-select-sm example">
                                {{#if data.user_role}}
                                <option selected> {{data.user_role}} </option>
                                {{/if}}
                                <option value="User">User</option>
                                <option value="Admin">Admin</option>
                                <option value="Manager">Manager</option>
                                <option value="Dealer">Dealer</option>
                            </select>
                        </div> -->

                        <div class="mb-3">
                            <label for="user-status" class="form-label">User Status</label>
                            <select class="form-select" id="user_status" name="user_status"
                                aria-label=".form-select-sm example">
                                {{#if data.user_status}}
                                <option selected> {{data.user_status}} </option>
                                {{/if}}
                                <option value="A">Active</option>
                                <option value="I">Not-Active</option>
                                <option value="H">Hold</option>
                            </select>
                        </div>

                        <!-- </div> -->

                    </div>
                </div>
                {{/isEqual}}

                </b>
                <button type="submit" class="btn btn-primary">Register</button>
                </b>
            </form>

            <p>Register user!... <a href="/auth/login">Signin</a></p>

        </div>
    </div>
</div>


<script>
    const passwordToggle = document.getElementById('password-toggle');
    const passwordField = document.getElementById('password');
    passwordToggle.addEventListener('click', function () {
        if (passwordField.type === 'password') {
            passwordField.type = 'text';
            passwordToggle.innerHTML = '<i class="bi bi-eye-slash"></i>';
        } else {
            passwordField.type = 'password';
            passwordToggle.innerHTML = '<i class="bi bi-eye"></i>';
        }
    });
</script>